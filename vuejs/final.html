<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meziplanetární cestovka</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <style>
    body { padding-top: 40px; }
  </style>
</head>
<body>
<div id="app" class="container" v-cloak>
  <h1 class="mb-4 text-center">Registrace na meziplanetární výlet</h1>

  <!-- Formulář -->
  <form class="card p-4 mx-auto" style="max-width: 600px;"
        @submit.prevent="handleSubmit">
    <div class="mb-3">
      <label class="form-label" for="name">Jméno astronauta</label>
      <input id="name"
             type="text"
             class="form-control"
             v-model.trim="trip.name">
      <div class="text-danger small" v-if="errors.name">
        {{ errors.name }}
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Destinace</label>
      <select class="form-select" v-model="trip.destination">
        <option disabled value="">Vyber planetu…</option>
        <option value="Mars">Mars – pro introverty, co nemusí kyslík</option>
        <option value="Měsíc">Měsíc – víkendovka s dobrou Wi-Fi</option>
        <option value="Jupiter">Jupiter – jen pro opravdu odolné</option>
        <option value="Pluto">Pluto – technicky možná ne planeta, ale proč ne</option>
      </select>
      <div class="text-danger small" v-if="errors.destination">
        {{ errors.destination }}
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label" for="days">Počet dní</label>
      <input id="days"
             type="number"
             min="1"
             max="365"
             class="form-control"
             v-model.number="trip.days">
      <div class="text-danger small" v-if="errors.days">
        {{ errors.days }}
      </div>
    </div>

    <div class="form-check mb-3">
      <input id="terms"
             type="checkbox"
             class="form-check-input"
             v-model="trip.accepted">
      <label class="form-check-label" for="terms">
        Souhlasím, že se může stát, že se vrátím o něco později, než je plánováno.
      </label>
      <div class="text-danger small" v-if="errors.accepted">
        {{ errors.accepted }}
      </div>
    </div>

    <button type="submit" class="btn btn-primary"
            :disabled="!isValidForm">
      Odeslat přihlášku
    </button>

    <p class="mt-3 text-muted small">
      Tento formulář nikam data neposílá – vše se děje pouze v prohlížeči.
    </p>
  </form>

  <!-- Palubní lístek -->
  <div class="card mt-4 mx-auto" style="max-width: 600px;"
       v-if="showTicket">
    <div class="card-body">
      <h2 class="card-title">Palubní lístek</h2>
      <p class="card-text">
        Jméno: <strong>{{ trip.name }}</strong><br>
        Destinace: <strong>{{ trip.destination }}</strong><br>
        Počet dní: <strong>{{ trip.days }}</strong><br>
        Odhadovaná cena: <strong>{{ price }} kreditů</strong>
      </p>
      <p class="text-muted mb-0">
        Pokud si to rozmyslíš, můžeš formulář upravit
        a palubní lístek se automaticky aktualizuje.
      </p>
    </div>
  </div>
</div>

<!-- Vue z CDN -->
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
  const { createApp, computed } = Vue;

  const app = createApp({
    data() {
      return {
        trip: {
          name: '',
          destination: '',
          days: 3,
          accepted: false
        },
        errors: {},
        showTicket: false
      };
    },
    computed: {
      isValidForm() {
        // jednoduchá logika – pro tlačítko
        return this.trip.name &&
               this.trip.destination &&
               this.trip.days >= 1 &&
               this.trip.days <= 365 &&
               this.trip.accepted;
      },
      price() {
        // jednoduchý „výpočet ceny“
        let base = 1000;
        if (this.trip.destination === 'Mars') base = 2000;
        if (this.trip.destination === 'Měsíc') base = 800;
        if (this.trip.destination === 'Jupiter') base = 5000;
        if (this.trip.destination === 'Pluto') base = 3000;

        return base * (this.trip.days || 1);
      }
    },
    methods: {
      validate() {
        this.errors = {};

        if (!this.trip.name) {
          this.errors.name = 'Jméno je povinné – i astronauti mají jména.';
        }

        if (!this.trip.destination) {
          this.errors.destination = 'Vyber nějakou destinaci.';
        }

        if (!this.trip.days || this.trip.days < 1) {
          this.errors.days = 'Musí to být alespoň jeden den.';
        } else if (this.trip.days > 365) {
          this.errors.days = 'To už je spíš přestěhování než výlet.';
        }

        if (!this.trip.accepted) {
          this.errors.accepted = 'Bez souhlasu tě na palubu nepustíme.';
        }

        return Object.keys(this.errors).length === 0;
      },
      handleSubmit() {
        if (this.validate()) {
          this.showTicket = true;
        } else {
          this.showTicket = false;
        }
      }
    }
  }).mount('#app');

  // Volitelně: vystavit app do window pro hraní v konzoli
  window.app = app;
</script>
</body>
</html>
